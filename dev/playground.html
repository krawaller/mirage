<html>
<head>
  <title>Mirage testing</title>
</head>
<body>
	<div id="wrapper"></div><div id="edit"></div>

<style type="text/css">
.prop-label {
	color: #BBB;
	font-size: 0.8em;
	margin-right: 0.5em;
}
.prop-value {
	margin-right: 0.5em;
}

.prop-label:after {
	content: ":";
}
</style>

<script type="text/javascript" src="../libs/underscore-min.js"></script>
<script type="text/javascript" src="../libs/jquery-min.js"></script>
<script type="text/javascript" src="../libs/backbone-min.js"></script>
<script type="text/javascript" src="../mirage.js"></script>

<script>
	var props = {
		name: {},
		age: {
			type: "integer"
		},
		stupid: {
			type: "bool",
			label: "Totally moronic"
		}
	};
	var people = new Backbone.Collection([{name:"fred",age:22},{name:"stooge",age:45,stupid:true},{name:"foo",age:91}]);
	var peopleView = new Mirage.Collection.base({
		collection: people,
		type: "people",
		props: props,
		render: {
			props: ["name","age"],
			showlabel: false
		}
	});
	peopleView.on("modelclick",function(o){
		var editView = new Mirage.Model.base({
			model: o.model,
			type: "people",
			editing: true,
			props: props
		});
		$("#edit").empty().append(editView.$el);
		editView.on("submit",function(data){
			o.model.set(data);
			$("#edit").empty()
		});
	});
	$("#wrapper").append(peopleView.$el);
	
</script>
</body>